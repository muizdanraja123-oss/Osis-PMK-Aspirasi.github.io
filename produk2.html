<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produk - OSIS PMK ASPIRASI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            background-color: #3b82f6;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            transition: all 0.3s ease;
        }
        
        .btn-gold:hover {
            background: linear-gradient(135deg, #d97706, #b45309);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);
        }
        
        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .product-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            border-color: #3b82f6;
            box-shadow: 0 20px 25px -5px rgba(59, 130, 246, 0.1);
        }
        
        .stock-low {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .cart-badge {
            animation: bounce 0.5s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0,-10px,0); }
            70% { transform: translate3d(0,-5px,0); }
            90% { transform: translate3d(0,-2px,0); }
        }
        
        .quantity-btn {
            transition: all 0.2s ease;
        }
        
        .quantity-btn:hover {
            transform: scale(1.1);
        }
        
        .quantity-btn:active {
            transform: scale(0.95);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .success-animation {
            animation: successPulse 0.6s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .real-time-indicator {
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        @media (max-width: 768px) {
            .mobile-menu {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .mobile-menu.open {
                transform: translateX(0);
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-yellow-50">
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="relative w-12 h-12 bg-gradient-to-br from-blue-600 via-blue-700 to-yellow-600 rounded-xl shadow-lg transform rotate-3 hover:rotate-0 transition-all duration-300">
                        <div class="absolute inset-0.5 bg-white rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"/>
                                <circle cx="12" cy="12" r="2" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white shadow-sm"></div>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">OSIS PMK</h1>
                        <p class="text-sm bg-gradient-to-r from-blue-600 to-yellow-600 bg-clip-text text-transparent font-medium">ASPIRASI</p>
                    </div>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="index.html" class="nav-link text-gray-700 hover:text-blue-600 font-medium">Beranda</a>
                    <a href="about2.html" class="nav-link text-gray-700 hover:text-blue-600 font-medium">Tentang Kami</a>
                    <a href="produk2.html" class="nav-link text-blue-600 font-medium">Produk</a>
                    <a href="kontak2.html" class="nav-link text-gray-700 hover:text-blue-600 font-medium">Kontak</a>

                    <!-- Cart Button -->
                    <button onclick="toggleCart()" class="relative btn-primary px-4 py-2 rounded-full font-medium flex items-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15M17 21a2 2 0 100-4 2 2 0 000 4zM9 21a2 2 0 100-4 2 2 0 000 4z"></path>
                        </svg>
                        <span>Keranjang</span>
                        <span id="cartBadge" class="cart-badge absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center hidden">0</span>
                    </button>
                </div>
                
                <!-- Mobile Menu Button -->
                <button class="md:hidden text-gray-700" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobileMenu" class="mobile-menu md:hidden fixed top-0 left-0 w-64 h-full bg-white shadow-xl z-50">
                <div class="p-4">
                    <div class="flex justify-between items-center mb-8">
                        <span class="text-lg font-bold text-gray-800">Menu</span>
                        <button onclick="toggleMobileMenu()" class="text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="space-y-4">
                        <a href="index.html" class="block text-gray-700 hover:text-blue-600 font-medium py-2" onclick="toggleMobileMenu()">Beranda</a>
                        <a href="about2.html" class="block text-gray-700 hover:text-blue-600 font-medium py-2" onclick="toggleMobileMenu()">Tentang Kami</a>
                        <a href="produk2.html" class="block text-blue-600 font-medium py-2" onclick="toggleMobileMenu()">Produk</a>
                        <a href="kontak2.html" class="block text-gray-700 hover:text-blue-600 font-medium py-2" onclick="toggleMobileMenu()">Kontak</a>
                        <button onclick="toggleCart(); toggleMobileMenu();" class="w-full text-left btn-primary px-4 py-2 rounded-lg font-medium mt-4">
                            Keranjang (<span id="mobileCartCount">0</span>)
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-blue-600 via-blue-700 to-yellow-600 text-white py-20">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-5xl md:text-6xl font-bold mb-6 fade-in">Produk OSIS</h1>
            <p class="text-xl md:text-2xl max-w-3xl mx-auto fade-in">Dapatkan merchandise dan produk eksklusif dari OSIS PMK ASPIRASI</p>
            
            <!-- Real-time Stock Indicator -->
            <div class="mt-8 inline-flex items-center space-x-2 bg-white/20 backdrop-blur-sm rounded-full px-6 py-3">
                <div class="real-time-indicator w-3 h-3 bg-green-400 rounded-full"></div>
                <span class="text-sm font-medium">Stok terupdate secara real-time</span>
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-2xl shadow-xl p-6">
            <div class="flex flex-wrap items-center justify-between gap-4">
                <div class="flex items-center space-x-4">
                    <h3 class="text-lg font-bold text-gray-800">Filter Produk:</h3>
                    <div class="flex space-x-2">
                        <button onclick="filterProducts('all')" class="filter-btn active px-4 py-2 rounded-lg bg-blue-600 text-white font-medium">Semua</button>
                        <button onclick="filterProducts('merchandise')" class="filter-btn px-4 py-2 rounded-lg bg-gray-200 text-gray-700 font-medium">Merchandise</button>
                        <button onclick="filterProducts('stationery')" class="filter-btn px-4 py-2 rounded-lg bg-gray-200 text-gray-700 font-medium">Alat Tulis</button>
                        <button onclick="filterProducts('accessories')" class="filter-btn px-4 py-2 rounded-lg bg-gray-200 text-gray-700 font-medium">Aksesoris</button>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-600">Urutkan:</span>
                    <select id="sortSelect" onchange="sortProducts()" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="name">Nama A-Z</option>
                        <option value="price-low">Harga Terendah</option>
                        <option value="price-high">Harga Tertinggi</option>
                        <option value="stock">Stok Tersedia</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <main class="container mx-auto px-4 pb-16">
        <div id="productsGrid" class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
            <!-- Products will be dynamically inserted here -->
        </div>
        
        <!-- No products message -->
        <div id="noProducts" class="hidden text-center py-16">
            <div class="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2 2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Tidak Ada Produk</h3>
            <p class="text-gray-600">Tidak ada produk yang sesuai dengan filter yang dipilih.</p>
        </div>
    </main>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-2xl font-bold text-gray-800">Keranjang Belanja</h3>
                    <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div id="cartItems" class="flex-1 overflow-y-auto p-6">
                <!-- Cart items will be inserted here -->
            </div>
            
            <div class="p-6 border-t border-gray-200 bg-gray-50">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-lg font-bold text-gray-800">Total:</span>
                    <span id="cartTotal" class="text-2xl font-bold text-blue-600">Rp 0</span>
                </div>
                <div class="flex space-x-3">
                    <button onclick="clearCart()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-medium transition-colors">
                        Kosongkan
                    </button>
                    <button onclick="checkout()" class="flex-1 btn-primary py-3 rounded-lg font-medium">
                        Checkout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-8 text-center">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Berhasil!</h3>
            <p id="successMessage" class="text-gray-600 mb-6">Produk berhasil ditambahkan ke keranjang.</p>
            <button onclick="closeSuccessModal()" class="btn-primary px-6 py-2 rounded-lg font-medium">
                Tutup
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="relative w-10 h-10 bg-gradient-to-br from-blue-600 via-blue-700 to-yellow-600 rounded-lg shadow-lg">
                            <div class="absolute inset-0.5 bg-white rounded-md flex items-center justify-center">
                                <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"/>
                                    <circle cx="12" cy="12" r="2" fill="currentColor"/>
                                </svg>
                            </div>
                            <div class="absolute -top-0.5 -right-0.5 w-3 h-3 bg-yellow-400 rounded-full border border-gray-800"></div>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold">OSIS PMK ASPIRASI</h3>
                        </div>
                    </div>
                    <p class="text-gray-300">Berkarya bersama membangun masa depan yang gemilang melalui pendidikan dan kreativitas.</p>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">Menu Utama</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="index.html" class="hover:text-blue-400 transition-colors">Beranda</a></li>
                        <li><a href="about2.html" class="hover:text-blue-400 transition-colors">Tentang Kami</a></li>
                        <li><a href="produk2.html" class="hover:text-blue-400 transition-colors">Produk</a></li>
                        <li><a href="kontak2.html" class="hover:text-blue-400 transition-colors">Kontak</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">Kontak Cepat</h4>
                    <div class="space-y-2 text-gray-300">
                        <p>📧 osis@pmkaspirasi.sch.id</p>
                        <p>📱 (021) 1234-5678</p>
                        <p>📍 Karawang</p>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-300">
                <p>&copy; 2025 OSIS PMK ASPIRASI. Semua hak dilindungi.</p>
            </div>
        </div>
    </footer>

    <script>
        // Product data with real-time stock simulation
        let products = [
            {
                id: 1,
                name: 'Kaos OSIS PMK',
                category: 'merchandise',
                price: 75000,
                stock: 25,
                image: '👕',
                description: 'Kaos berkualitas tinggi dengan logo OSIS PMK ASPIRASI',
                sizes: ['S', 'M', 'L', 'XL']
            },
            {
                id: 2,
                name: 'Tote Bag Canvas',
                category: 'merchandise',
                price: 45000,
                stock: 15,
                image: '👜',
                description: 'Tas canvas ramah lingkungan dengan desain eksklusif',
                colors: ['Putih', 'Biru', 'Kuning']
            },
            {
                id: 3,
                name: 'Pulpen OSIS',
                category: 'stationery',
                price: 8000,
                stock: 50,
                image: '🖊️',
                description: 'Pulpen berkualitas dengan logo OSIS PMK',
                colors: ['Biru', 'Hitam', 'Merah']
            },
            {
                id: 4,
                name: 'Notebook Premium',
                category: 'stationery',
                price: 25000,
                stock: 30,
                image: '📓',
                description: 'Buku catatan premium dengan cover eksklusif',
                sizes: ['A5', 'A4']
            },
            {
                id: 5,
                name: 'Sticker Pack',
                category: 'accessories',
                price: 15000,
                stock: 8,
                image: '🏷️',
                description: 'Set sticker dengan berbagai desain menarik',
                variants: ['Set A', 'Set B', 'Set C']
            },
            {
                id: 6,
                name: 'Gantungan Kunci',
                category: 'accessories',
                price: 12000,
                stock: 40,
                image: '🔑',
                description: 'Gantungan kunci dengan logo OSIS PMK',
                materials: ['Akrilik', 'Metal', 'Karet']
            },
            {
                id: 7,
                name: 'Hoodie OSIS',
                category: 'merchandise',
                price: 125000,
                stock: 3,
                image: '🧥',
                description: 'Hoodie premium dengan bordir logo OSIS',
                sizes: ['S', 'M', 'L', 'XL', 'XXL']
            },
            {
                id: 8,
                name: 'Tumbler Stainless',
                category: 'accessories',
                price: 55000,
                stock: 20,
                image: '🥤',
                description: 'Tumbler stainless steel dengan logo OSIS',
                colors: ['Silver', 'Hitam', 'Biru']
            }
        ];

        let cart = [];
        let currentFilter = 'all';
        let currentSort = 'name';

        // Simulate real-time stock updates from other users
        function simulateRealTimeUpdates() {
            setInterval(() => {
                // Randomly decrease stock for some products (simulating other users buying)
                const randomProduct = products[Math.floor(Math.random() * products.length)];
                if (randomProduct.stock > 0 && Math.random() < 0.3) { // 30% chance
                    const decrease = Math.floor(Math.random() * 2) + 1; // Decrease by 1-2
                    randomProduct.stock = Math.max(0, randomProduct.stock - decrease);
                    
                    // Show notification if stock is getting low
                    if (randomProduct.stock <= 5 && randomProduct.stock > 0) {
                        showStockAlert(randomProduct);
                    }
                    
                    displayProducts();
                }
            }, 8000); // Update every 8 seconds
        }

        // Show stock alert notification
        function showStockAlert(product) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 max-w-sm';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <span class="text-lg">⚠️</span>
                    <div>
                        <div class="font-medium">Stok Terbatas!</div>
                        <div class="text-sm">${product.name} - Tersisa ${product.stock} item</div>
                    </div>
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('open');
        }

        // Filter products
        function filterProducts(category) {
            currentFilter = category;
            
            // Update filter buttons
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active', 'bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('active', 'bg-blue-600', 'text-white');
            
            displayProducts();
        }

        // Sort products
        function sortProducts() {
            currentSort = document.getElementById('sortSelect').value;
            displayProducts();
        }

        // Display products
        function displayProducts() {
            let filteredProducts = products;
            
            // Apply filter
            if (currentFilter !== 'all') {
                filteredProducts = products.filter(product => product.category === currentFilter);
            }
            
            // Apply sort
            filteredProducts.sort((a, b) => {
                switch (currentSort) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'price-low':
                        return a.price - b.price;
                    case 'price-high':
                        return b.price - a.price;
                    case 'stock':
                        return b.stock - a.stock;
                    default:
                        return 0;
                }
            });
            
            const grid = document.getElementById('productsGrid');
            const noProducts = document.getElementById('noProducts');
            
            if (filteredProducts.length === 0) {
                grid.classList.add('hidden');
                noProducts.classList.remove('hidden');
                return;
            }
            
            grid.classList.remove('hidden');
            noProducts.classList.add('hidden');
            
            grid.innerHTML = filteredProducts.map(product => `
                <div class="product-card bg-white rounded-2xl shadow-xl overflow-hidden ${product.stock === 0 ? 'opacity-60' : ''}">
                    <div class="relative">
                        <div class="h-48 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center">
                            <span class="text-6xl">${product.image}</span>
                        </div>
                        
                        <!-- Stock Badge -->
                        <div class="absolute top-3 right-3">
                            ${product.stock === 0 ? 
                                '<span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium">Habis</span>' :
                                product.stock <= 5 ? 
                                '<span class="stock-low bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium">Stok Terbatas</span>' :
                                '<span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs font-medium">Tersedia</span>'
                            }
                        </div>
                        
                        <!-- Real-time indicator -->
                        <div class="absolute top-3 left-3 flex items-center space-x-1 bg-white/90 backdrop-blur-sm rounded-full px-2 py-1">
                            <div class="real-time-indicator w-2 h-2 bg-green-400 rounded-full"></div>
                            <span class="text-xs text-gray-600">Live</span>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">${product.name}</h3>
                        <p class="text-gray-600 text-sm mb-3">${product.description}</p>
                        
                        <!-- Product variants -->
                        ${product.sizes ? `
                            <div class="mb-3">
                                <span class="text-xs text-gray-500">Ukuran: ${product.sizes.join(', ')}</span>
                            </div>
                        ` : ''}
                        ${product.colors ? `
                            <div class="mb-3">
                                <span class="text-xs text-gray-500">Warna: ${product.colors.join(', ')}</span>
                            </div>
                        ` : ''}
                        ${product.variants ? `
                            <div class="mb-3">
                                <span class="text-xs text-gray-500">Varian: ${product.variants.join(', ')}</span>
                            </div>
                        ` : ''}
                        ${product.materials ? `
                            <div class="mb-3">
                                <span class="text-xs text-gray-500">Bahan: ${product.materials.join(', ')}</span>
                            </div>
                        ` : ''}
                        
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <span class="text-2xl font-bold text-blue-600">Rp ${product.price.toLocaleString('id-ID')}</span>
                                <div class="text-sm text-gray-500">Stok: ${product.stock}</div>
                            </div>
                        </div>
                        
                        <!-- Quantity Selector -->
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-sm font-medium text-gray-700">Jumlah:</span>
                            <div class="flex items-center space-x-2">
                                <button onclick="changeQuantity(${product.id}, -1)" class="quantity-btn w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center ${product.stock === 0 ? 'opacity-50 cursor-not-allowed' : ''}">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                    </svg>
                                </button>
                                <span id="quantity-${product.id}" class="w-8 text-center font-medium">1</span>
                                <button onclick="changeQuantity(${product.id}, 1)" class="quantity-btn w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center ${product.stock === 0 ? 'opacity-50 cursor-not-allowed' : ''}">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <button onclick="addToCart(${product.id})" 
                                class="w-full py-3 rounded-lg font-medium transition-all ${
                                    product.stock === 0 ? 
                                    'bg-gray-300 text-gray-500 cursor-not-allowed' : 
                                    'btn-primary hover:shadow-lg'
                                }" 
                                ${product.stock === 0 ? 'disabled' : ''}>
                            ${product.stock === 0 ? 'Stok Habis' : 'Tambah ke Keranjang'}
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Change quantity
        function changeQuantity(productId, change) {
            const product = products.find(p => p.id === productId);
            if (!product || product.stock === 0) return;
            
            const quantityElement = document.getElementById(`quantity-${productId}`);
            let currentQuantity = parseInt(quantityElement.textContent);
            let newQuantity = currentQuantity + change;
            
            // Ensure quantity is within valid range
            newQuantity = Math.max(1, Math.min(newQuantity, product.stock));
            
            quantityElement.textContent = newQuantity;
        }

        // Add to cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || product.stock === 0) return;
            
            const quantityElement = document.getElementById(`quantity-${productId}`);
            const quantity = parseInt(quantityElement.textContent);
            
            // Check if enough stock
            if (quantity > product.stock) {
                showSuccessModal(`Maaf, stok ${product.name} hanya tersisa ${product.stock} item.`);
                return;
            }
            
            // Check if product already in cart
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                const totalQuantity = existingItem.quantity + quantity;
                if (totalQuantity > product.stock) {
                    showSuccessModal(`Maaf, total quantity melebihi stok yang tersedia (${product.stock} item).`);
                    return;
                }
                existingItem.quantity = totalQuantity;
            } else {
                cart.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    quantity: quantity,
                    image: product.image
                });
            }
            
            // Update stock (simulate real-time purchase)
            product.stock -= quantity;
            
            // Reset quantity selector
            quantityElement.textContent = '1';
            
            // Update cart display
            updateCartDisplay();
            
            // Show success message
            showSuccessModal(`${product.name} (${quantity}x) berhasil ditambahkan ke keranjang!`);
            
            // Refresh product display
            displayProducts();
        }

        // Update cart display
        function updateCartDisplay() {
            const cartBadge = document.getElementById('cartBadge');
            const mobileCartCount = document.getElementById('mobileCartCount');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (totalItems > 0) {
                cartBadge.textContent = totalItems;
                cartBadge.classList.remove('hidden');
                cartBadge.classList.add('cart-badge');
            } else {
                cartBadge.classList.add('hidden');
            }
            
            mobileCartCount.textContent = totalItems;
        }

        // Toggle cart modal
        function toggleCart() {
            const modal = document.getElementById('cartModal');
            modal.classList.toggle('show');
            
            if (modal.classList.contains('show')) {
                displayCartItems();
            }
        }

        // Display cart items
        function displayCartItems() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="text-center py-8">
                        <div class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15"></path>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 mb-2">Keranjang Kosong</h3>
                        <p class="text-gray-600">Belum ada produk yang ditambahkan ke keranjang.</p>
                    </div>
                `;
                cartTotal.textContent = 'Rp 0';
                return;
            }
            
            cartItems.innerHTML = cart.map(item => `
                <div class="flex items-center space-x-4 p-4 border border-gray-200 rounded-lg mb-3">
                    <div class="w-16 h-16 bg-gradient-to-br from-blue-100 to-yellow-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">${item.image}</span>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-medium text-gray-800">${item.name}</h4>
                        <p class="text-sm text-gray-600">Rp ${item.price.toLocaleString('id-ID')}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button onclick="updateCartQuantity(${item.id}, -1)" class="quantity-btn w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                            </svg>
                        </button>
                        <span class="w-8 text-center font-medium">${item.quantity}</span>
                        <button onclick="updateCartQuantity(${item.id}, 1)" class="quantity-btn w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                        </button>
                    </div>
                    <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </button>
                </div>
            `).join('');
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotal.textContent = `Rp ${total.toLocaleString('id-ID')}`;
        }

        // Update cart quantity
        function updateCartQuantity(productId, change) {
            const cartItem = cart.find(item => item.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (!cartItem || !product) return;
            
            const newQuantity = cartItem.quantity + change;
            
            if (newQuantity <= 0) {
                removeFromCart(productId);
                return;
            }
            
            // Check stock availability
            const currentStockUsed = cart.reduce((sum, item) => item.id === productId ? sum + item.quantity : sum, 0);
            const availableStock = product.stock + cartItem.quantity; // Add back current cart quantity
            
            if (newQuantity > availableStock) {
                showSuccessModal(`Stok tidak mencukupi. Tersedia: ${availableStock} item`);
                return;
            }
            
            cartItem.quantity = newQuantity;
            updateCartDisplay();
            displayCartItems();
        }

        // Remove from cart
        function removeFromCart(productId) {
            const cartItemIndex = cart.findIndex(item => item.id === productId);
            if (cartItemIndex === -1) return;
            
            const cartItem = cart[cartItemIndex];
            const product = products.find(p => p.id === productId);
            
            // Return stock
            if (product) {
                product.stock += cartItem.quantity;
            }
            
            cart.splice(cartItemIndex, 1);
            updateCartDisplay();
            displayCartItems();
            displayProducts(); // Refresh to show updated stock
        }

        // Clear cart
        function clearCart() {
            // Return all stock
            cart.forEach(cartItem => {
                const product = products.find(p => p.id === cartItem.id);
                if (product) {
                    product.stock += cartItem.quantity;
                }
            });
            
            cart = [];
            updateCartDisplay();
            displayCartItems();
            displayProducts(); // Refresh to show updated stock
        }

        // Checkout
        function checkout() {
            if (cart.length === 0) {
                showSuccessModal('Keranjang masih kosong!');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            // Simulate checkout process
            showSuccessModal(`Checkout berhasil! Total: Rp ${total.toLocaleString('id-ID')} untuk ${itemCount} item. Terima kasih atas pembelian Anda!`);
            
            // Clear cart after successful checkout
            cart = [];
            updateCartDisplay();
            displayCartItems();
            toggleCart();
        }

        // Show success modal
        function showSuccessModal(message) {
            document.getElementById('successMessage').textContent = message;
            document.getElementById('successModal').classList.add('show');
        }

        // Close success modal
        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('show');
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            const cartModal = document.getElementById('cartModal');
            const successModal = document.getElementById('successModal');
            
            if (event.target === cartModal) {
                cartModal.classList.remove('show');
            }
            
            if (event.target === successModal) {
                successModal.classList.remove('show');
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            displayProducts();
            updateCartDisplay();
            simulateRealTimeUpdates();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'986bcf771425f7e6',t:'MTc1OTE1MjM2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
